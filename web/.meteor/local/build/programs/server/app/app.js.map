{"version":3,"sources":["meteor://ðŸ’»app/lib/collections/guestUpdates/collection.js","meteor://ðŸ’»app/lib/_helpers.js","meteor://ðŸ’»app/lib/constants.js","meteor://ðŸ’»app/server/lib/guestUpdates/methods.js","meteor://ðŸ’»app/server/publications.js","meteor://ðŸ’»app/server/router.js"],"names":[],"mappings":";;;;;;;;AAAA,eAAe,IAAI,MAAM,UAAV,CAAqB,cAArB,CAAf;;AAEA,IAAM,oBAAoB,IAAI,YAAJ,CAAiB;AACzC,OAAK,EAAE,MAAM,MAAR,EAAgB,OAAO,aAAa,KAAb,CAAmB,EAA1C,EADoC;AAEzC,SAAO,EAAE,MAAM,MAAR,EAFkC,E;AAGzC,OAAK,EAAE,MAAM,MAAR,EAHoC,E;AAIzC,UAAQ,EAAE,MAAM,MAAR,EAJiC,E;AAKzC,aAAW,EAAE,MAAM,IAAR;AAL8B,CAAjB,CAA1B;;AAQA,aAAa,YAAb,CAA0B,iBAA1B;;AAEA,aAAa,OAAb,GAAuB,EAAvB,yF;;;;;;;;;;;ACZA,UAAU,EAAV,qG;;;;;;;;;;;ACAA,YAAY;AACV,YAAU,kCADA;AAEV,UAAQ;AAFE,CAAZ,gH;;;;;;;;;;;;ACCA,aAAa,OAAb,CAAqB,QAArB,GAAgC,IAAI,eAAJ,CAAoB;AAClD,QAAM,+BAD4C;;AAGlD,YAAU,IAAI,YAAJ,GAAmB,SAAnB,EAHwC;AAIlD,KAJkD,iBAI5C;;AAEJ,QAAM,aAAa,IAAI,aAAJ,EAAnB;;;AAGA,eAAW,eAAX,CAA2B,wBAA3B,EAAqD,EAAE,OAAO,EAAT,EAAa,QAAQ,EAArB,EAArD,EAAgF,UAAS,GAAT,EAAc,IAAd,EAAoB;AAClG,UAAI,GAAJ,EAAS;AACP,gBAAQ,KAAR,CAAc,uBAAd;AACD,OAFD,MAEO;AACL,gBAAQ,GAAR,CAAY,KAAK,IAAjB;AACD;AACF,KAND;AAOD;AAhBiD,CAApB,CAAhC,+G;;;;;;;;;;;ACDA,OAAO,OAAP,CAAe,YAAM;AACnB,uBAAqB,cAArB,CAAoC,MAApC,CACE,EAAE,SAAS,SAAX,EADF,EAEE,EAAE,MACA,EAAE,UAAU,UAAU,QAAtB;AACE,cAAQ,UAAU;AADpB;AADF,GAFF,EAOE,EAAE,QAAQ,IAAV,EAPF;AASD,CAVD;;AAYA,OAAO,OAAP,CAAe,kBAAf,EAAmC,YAAM;AACvC,SAAO,aAAa,IAAb,EAAP;AACD,CAFD,iH;;;;;;;;;;;ACZA,WAAW,GAAX,CAAe,MAAf,EAAuB,cAAvB,EAAuC,UAAC,GAAD,EAAM,GAAN,EAAW,IAAX,EAAoB;AAAA,kBAC1B,IAAI,IADsB;AAAA,MACjD,GADiD,aACjD,GADiD;AAAA,MAC5C,MAD4C,aAC5C,MAD4C;AAAA,MACpC,KADoC,aACpC,KADoC;;AAEzD,MAAM,YAAY,IAAI,IAAJ,CAAS,CAAC,IAAI,IAAJ,CAAS,SAAnB,CAAlB;;AAEA,MAAI,UAAU;AACZ,UAAM;AACJ,eAAS;AADL,KADM;AAIZ,UAAM;AAJM,GAAd;;AAOA,eAAa,MAAb,CACE,EAAE,QAAF;AACE,kBADF;AAEE,gBAFF;AAGE;AAHF,GADF,EAKK,UAAC,GAAD,EAAM,aAAN,EAAwB;AACzB,QAAI,GAAJ,EAAS;AACP,cAAQ,GAAR,oCAA6C,IAAI,OAAjD;AACA,gBAAU;AACR,cAAM;AACJ,mBAAS,IAAI;AADT,SADE;AAIR,cAAM;AAJE,OAAV;AAMD,KARD,MAQO;AACL,cAAQ,GAAR,CAAY,0CAAZ;AACD;AACJ,GAjBD;AAkBA,SAAO,WAAW,UAAX,CAAsB,GAAtB,EAA2B,OAA3B,CAAP;AACD,CA9BD,iH","file":"/app.js","sourcesContent":["GuestUpdates = new Mongo.Collection('guestUpdates');\n\nconst guestUpdateSchema = new SimpleSchema({\n  _id: { type: String, regEx: SimpleSchema.RegEx.Id },\n  value: { type: String },  // 'INC', or 'DEC'\n  age: { type: String }, // 'AGE_GROUP_1', 'AGE_GROUP_2', 'AGE_GROUP_3', 'AGE_GROUP_4', or 'AGE_GROUP_5'\n  gender: { type: String }, // 'GENDER_MALE' or 'GENDER_FEMALE'\n  timestamp: { type: Date },\n});\n\nGuestUpdates.attachSchema(guestUpdateSchema);\n\nGuestUpdates.methods = {};\n","Helpers = {};\n","Constants = {\n  clientId: '403ae8720ffb4073b04f4a9984181dab',\n  secret: '4dc1f953232a43d6a30b4a9b407c33a3',\n};\n","\nGuestUpdates.methods.getElvis = new ValidatedMethod({\n  name: 'GuestUpdates.methods.getElvis',\n\n  validate: new SimpleSchema().validator(),\n  run() {\n\n    const spotifyApi = new SpotifyWebApi();\n\n    // Get Elvis' albums\n    spotifyApi.getArtistAlbums('43ZHCT0cAZBISjO8DG9PnE', { limit: 10, offset: 20 }, function(err, data) {\n      if (err) {\n        console.error('Something went wrong!');\n      } else {\n        console.log(data.body);\n      }\n    });\n  },\n});\n","Meteor.startup(() => {\n  ServiceConfiguration.configurations.update(\n    { service: 'spotify' },\n    { $set:\n      { clientId: Constants.clientId,\n        secret: Constants.secret,\n      },\n    },\n    { upsert: true }\n  );\n});\n\nMeteor.publish('GuestUpdates.all', () => {\n  return GuestUpdates.find();\n});\n","JsonRoutes.add('post', '/guestUpdate', (req, res, next) => {\n  const { age, gender, value } = req.body;\n  const timestamp = new Date(+req.body.timestamp);\n\n  let options = {\n    data: {\n      message: 'Success! guestUpdate has been registered',\n    },\n    code: 200,\n  };\n\n  GuestUpdates.insert(\n    { age,\n      gender,\n      value,\n      timestamp,\n    }, (err, guestUpdateId) => {\n      if (err) {\n        console.log(`Error on POST to guestUpdate: ${err.message}`);\n        options = {\n          data: {\n            message: err.message,\n          },\n          code: 500,\n        };\n      } else {\n        console.log('Success! guestUpdate has been registered');\n      }\n  });\n  return JsonRoutes.sendResult(res, options);\n});\n"]}