{"version":3,"sources":["meteor://ðŸ’»app/client/template.body.js","meteor://ðŸ’»app/client/template.home.js","meteor://ðŸ’»app/client/home.js","meteor://ðŸ’»app/client/router.js","meteor://ðŸ’»app/lib/collections/guestUpdates/collection.js","meteor://ðŸ’»app/lib/_helpers.js","meteor://ðŸ’»app/lib/constants.js"],"names":[],"mappings":"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","file":"/app.js","sourcesContent":["\nTemplate.body.addContent((function() {\n  var view = this;\n  return \"\";\n}));\nMeteor.startup(Template.body.renderToDocument);\n","\nTemplate.__checkName(\"home\");\nTemplate[\"home\"] = new Template(\"Template.home\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"page\"\n  }, HTML.Raw('\\n\\n\t\t<!-- <div id=\"now-playing\">\\n\t\t\tNow Playing: HÃ¥kan HellstrÃ¶m - Din tid kommer\\n\t\t</div> -->\\n\t\t'), Spacebars.include(view.lookupTemplate(\"nowPlaying\")), HTML.Raw(\"\\n\\n\t\t<!-- <h1>DeeeeeDjay</h1> -->\\n\t\t<!-- {{> currentGuests }} -->\\n\t\t<!-- {{> genderRatio}} -->\\n\t\t<!-- {{> ageRatio}} -->\\n\t\t\"), Spacebars.include(view.lookupTemplate(\"nextTrack\")), \"\\n\\n  \");\n}));\n\nTemplate.__checkName(\"nowPlaying\");\nTemplate[\"nowPlaying\"] = new Template(\"Template.nowPlaying\", (function() {\n  var view = this;\n  return HTML.Raw('<div id=\"now-playing\">\\n\t\t<span class=\"left-col\">Now Playing:</span>\\n\t\t<span class=\"mid-col\">HÃ¥kan HellstrÃ¶m - Din tid kommer</span>\\n\t\t<span class=\"right-col\">&nbsp;</span>\\n\t</div>');\n}));\n\nTemplate.__checkName(\"nextTrack\");\nTemplate[\"nextTrack\"] = new Template(\"Template.nextTrack\", (function() {\n  var view = this;\n  return HTML.Raw('<div id=\"next-track\">\\n\t\t<span class=\"left-col\">Next Song:</span>\\n\t\t<span class=\"mid-col\">Zara Larsson - Lush Life</span>\\n\t\t<span class=\"right-col count-down\">00:07</span>\\n  </div>');\n}));\n\nTemplate.__checkName(\"carousel\");\nTemplate[\"carousel\"] = new Template(\"Template.carousel\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: \"carousel\"\n  }, \"\\n\t\t\", Spacebars.include(view.lookupTemplate(\"currentGuests\")), \"\\n\t\t\", Spacebars.include(view.lookupTemplate(\"genderRatio\")), \"\\n\t\");\n}));\n\nTemplate.__checkName(\"currentGuests\");\nTemplate[\"currentGuests\"] = new Template(\"Template.currentGuests\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"current-guests-container\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"slider-text-container\"\n  }, \"\\n\t\t\t\", HTML.H2(\"Come on, there's \", Blaze.View(\"lookup:getNumberOfGuests\", function() {\n    return Spacebars.mustache(view.lookup(\"getNumberOfGuests\"));\n  }), \" people in here,\"), \"\\n\t\t\t\", HTML.Raw(\"<h1>Get on the dancefloor!</h1>\"), \"\\n\t\t\"), \"\\n\t\");\n}));\n\nTemplate.__checkName(\"genderRatio\");\nTemplate[\"genderRatio\"] = new Template(\"Template.genderRatio\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"gender-ratio-container\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"slider-text-container\"\n  }, \"\\n\t\t\t\", HTML.H2(\"Right now, there's \", Blaze.View(\"lookup:getNumberOfWomen\", function() {\n    return Spacebars.mustache(view.lookup(\"getNumberOfWomen\"));\n  }), \" women and \", Blaze.View(\"lookup:getNumberOfMen\", function() {\n    return Spacebars.mustache(view.lookup(\"getNumberOfMen\"));\n  }), \" men up in here!\"), \"\\n\t\t\"), \"\\n\t\");\n}));\n\nTemplate.__checkName(\"ageRatio\");\nTemplate[\"ageRatio\"] = new Template(\"Template.ageRatio\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"age-ratio-container\"\n  }, \"\\n\t\t\", HTML.DIV({\n    \"class\": \"twenties-age-container\"\n  }, \"\\n\t\t\t\", HTML.Raw(\"<h2>Twenties</h2>\"), \"\\n\t\t\t\", Blaze.View(\"lookup:getNumberOfTwenties\", function() {\n    return Spacebars.mustache(view.lookup(\"getNumberOfTwenties\"));\n  }), \"\\n\t\t\"), \"\\n\t\t\", HTML.DIV({\n    \"class\": \"thirties-age-container\"\n  }, \"\\n\t\t\t\", HTML.Raw(\"<h2>Thirties</h2>\"), \"\\n\t\t\t\", Blaze.View(\"lookup:getNumberOfThirties\", function() {\n    return Spacebars.mustache(view.lookup(\"getNumberOfThirties\"));\n  }), \"\\n\t\t\"), HTML.Raw('\\n\t\t<!-- <div class=\"fourties-age-container\">\\n\t\t\t<h2>Twenties</h2>\\n\t\t\t{{ getNumberOfFourties }}\\n\t\t</div>\\n\t\t<div class=\"fifties-age-container\">\\n\t\t\t<h2>Twenties</h2>\\n\t\t\t{{ getNumberOfFifties }}\\n\t\t</div>\\n\t\t<div class=\"Sixties-age-container\">\\n\t\t\t<h2>Twenties</h2>\\n\t\t\t{{ getNumberOfSixties }}\\n\t\t</div> -->\\n\t'));\n}));\n","Template.home.onCreated(function() {\n  this.autorun(() => {\n    this.subscribe('GuestUpdates.all');\n    \n    var options = {\n      showDialog: true, // Whether or not to force the user to approve the app again if theyâ€™ve already done so.\n      requestPermissions: ['user-read-email'] // Spotify access scopes.\n    };\n    Meteor.loginWithSpotify(options, function(err) {\n      console.log(err || \"No error\");\n      \n      Meteor.call('GuestUpdates.methods.getElvis', {}, (err, res) => {\n        if (err) {\n          console.log(err);\n        } else {\n          console.log('hej');\n        }\n      });\n    });\n  });\n});\n\nTemplate.carousel.onRendered(() => {\n  $('#carousel').slick({\n    autoplay: true,\n    autoplaySpeed: 2000,\n    infinite: true,\n  });\n});\n\nTemplate.currentGuests.helpers({\n  getNumberOfGuests() {\n    return getFieldAmount(GuestUpdates.find().fetch(), () => {\n      return true;\n    });\n  },\n});\n\nTemplate.genderRatio.helpers({\n  getNumberOfWomen() {\n    return getFieldAmount(GuestUpdates.find().fetch(), (guestUpdate) => {\n      return guestUpdate.gender === 'GENDER_FEMALE';\n    });\n  },\n  getNumberOfMen() {\n    return getFieldAmount(GuestUpdates.find().fetch(), (guestUpdate) => {\n      return guestUpdate.gender === 'GENDER_MALE';\n    });\n  },\n});\n\nTemplate.ageRatio.helpers({\n  getNumberOfTwenties() {\n    const guestUpdates = GuestUpdates.find({ age: 'AGE_GROUP_1' }).fetch();\n    let value = 0;\n    _.each(guestUpdates, (guestUpdate) => {\n      if (guestUpdate.value === 'INC') {\n        value++;\n      } else if (guestUpdate.value === 'DEC') {\n        value--;\n      }\n    });\n    return value;\n  },\n  getNumberOfThirties() {\n    const guestUpdates = GuestUpdates.find({ age: 'AGE_GROUP_2' }).fetch();\n    let value = 0;\n    _.each(guestUpdates, (guestUpdate) => {\n      if (guestUpdate.value === 'INC') {\n        value++;\n      } else if (guestUpdate.value === 'DEC') {\n        value--;\n      }\n    });\n    return value;\n  },\n});\n\n\nfunction getFieldAmount(array, fun) {\n  let currentAmount = 0;\n  _.each(array, (item) => {\n    const amount = item.value === 'INC' ? 1 : -1;\n    currentAmount += fun(item) ? amount : 0;\n  });\n\n  return currentAmount;\n}\n","FlowRouter.route('/', {\n  action() {\n    BlazeLayout.render('home', {});\n  }\n});\n","GuestUpdates = new Mongo.Collection('guestUpdates');\n\nconst guestUpdateSchema = new SimpleSchema({\n  _id: { type: String, regEx: SimpleSchema.RegEx.Id },\n  value: { type: String },  // 'INC', or 'DEC'\n  age: { type: String }, // 'AGE_GROUP_1', 'AGE_GROUP_2', 'AGE_GROUP_3', 'AGE_GROUP_4', or 'AGE_GROUP_5'\n  gender: { type: String }, // 'GENDER_MALE' or 'GENDER_FEMALE'\n  timestamp: { type: Date },\n});\n\nGuestUpdates.attachSchema(guestUpdateSchema);\n\nGuestUpdates.methods = {};\n","Helpers = {};\n","Constants = {\n  clientId: '403ae8720ffb4073b04f4a9984181dab',\n  secret: '4dc1f953232a43d6a30b4a9b407c33a3',\n};\n"]}